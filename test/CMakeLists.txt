if("${CMAKE_CXX_COMPILER_ID}" STREQUAL "MSVC")
    if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS 19.00)
        message(FATAL_ERROR "Require MSVC14 or higher")
    endif()
    add_compile_options("/std:c++latest")
    add_definitions(-D_HAS_AUTO_PTR_ETC)
elseif("{CMAKE_CXX_COMPILER_ID}" STREQUAL "GNU")
    if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS 7.0)
        message(FATAL_ERROR "Require GCC 7.0 or higher")
    endif()
elseif("{CMAKE_CXX_COMPILER_ID}" STREQUAL "Clang")
    if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS 3.9)
        message(FATAL_ERROR "Require Clang 3.9 or higher")
    endif()
endif()
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_INCLUDE_CURRENT_DIR ON)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin/${CONFIG})

find_package(Eigen3 REQUIRED)
find_package(CGAL REQUIRED)
find_package(CGAL REQUIRED COMPONENTS CGAL_Core)

set(WITH_OPENMP TRUE CACHE BOOL "Enable OpenMP")
if (WITH_OPENMP)
    find_package(OpenMP)
    if (OPENMP_FOUND)
        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${OpenMP_C_FLAGS}")
        set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${OpenMP_CXX_FLAGS}")
        set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${OpenMP_EXE_LINKER_FLAGS}")
    endif()
endif()

include(${CGAL_USE_FILE})
set(EUCLID_INCLUDE_DIR "../include")
include_directories(${CGAL_INCLUDE_DIRS} ${EIGEN3_INCLUDE_DIR} ${EUCLID_INCLUDE_DIR})

file(GLOB_RECURSE SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp)
file(GLOB_RECURSE HEADERS ${CMAKE_CURRENT_SOURCE_DIR}/*.h)

add_executable(test_Euclid ${SOURCES} ${HEADERS})

target_link_libraries(test_Euclid ${CGAL_LIBRARIES})
